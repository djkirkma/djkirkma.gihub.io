<!DOCTYPE html>
<html>
<meta charset="utf-8">
<head>
  <title>London's 1854 Cholera epidemic</title>
</head>
<script src=
"https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.2/d3.min.js">
</script>
  
<style>

</style>
  
<body>

   <a href='youtube.com'>Youtube Link</a>
   <a href='https://docs.google.com/document/d/1L6dELPbk4Of2kkuODjB9eQq4Btm8CZYVhpbWYf4makU/edit?usp=sharing'>Documnetation Link</a>
   <a href='https://github.com/djkirkma/djkirkma.gihub.io'>github</a>


    <h1> Assigment 1 - London's 1854 Cholera Epidemic</h1>
    <p> Made by Doug Kirkman</p>
    <p>10.12.2021</p>
    <svg style='float: left;'id='test' width="600" height="600"></svg>
    <div>
      <div style='float: left;' id="piechart"></div>

    </div>
    <div style="width: 1000px; height: 600px;"></div>
    <svg style="float: left;" id="legend" height=300 width=450></svg>
    
    <button onclick=WomenGraph()> Click to remove men</button>
    <button onclick=MenGraph()> Click to remove women</button>
    <div id="barchartdiv"></div>

  
  <script>
      ratio = 30
	  
        // Making a line Generator
        var Gen = d3.line();

		myParse = null;
		myPoints = [];
		d3.json("streets.json", function(error, data){
			
            data.forEach(element => {
                //console.log(element)
                var path = d3.path();
                //for each set of points, draw the line
                for(let x = 0; x < element.length; x++) {

                    if(x == 0)
                    path.moveTo(element[x].x * ratio ,element[x].y * ratio)
                    else
                    path.lineTo(element[x].x * ratio, element[x].y * ratio)
                    //console.log(element[x])
                }

                var svg = d3.select("#test").append("svg").attr("width", 1920).attr("height", 1080)


                svg.append("path")
                .attr("d", path)
                .attr("stroke", "black")
                .attr("fill", "transparent")
                
                

                
            });
        });
//
var svg = d3.select("#test").append("svg").attr("width", 1920).attr("height", 1080)

d3.csv("deaths_age_sex.csv", function(data) {
    data.forEach(element => {
        if(element.gender == 0) {
            gend = "red"
            classdata = "womendata"
        }
        else {
            gend = "green"
            classdata = 'mendata'
        }
        svg.append('rect')
  .attr('x', element.x * ratio)
  .attr('y', element.y * ratio)
  .attr('width', 10)
  .attr('height', 10)
  .attr("fill", gend)
  .attr("class",classdata)

    })
});

d3.csv("pumps.csv", function(data) {
    data.forEach(element => {
        svg.append('circle')
  .attr('cx', element.x * ratio)
  .attr('cy', element.y * ratio)
  .attr("r", 10)
  .attr('width', 10)
  .attr('height', 10)
  .attr("fill", "blue")
    });
});
var svgLegend = d3.select("#legend")
svgLegend.append("circle").attr("cx",20).attr("cy",30).attr("r", 6).style("fill", "green")
svgLegend.append("circle").attr("cx",120).attr("cy",30).attr("r", 6).style("fill", "red")
svgLegend.append("circle").attr("cx",220).attr("cy",30).attr("r", 6).style("fill", "blue")

svgLegend.append("text").attr("x", 30).attr("y", 30).text("Men").style("font-size", "16px").attr("alignment-baseline","middle")
svgLegend.append("text").attr("x", 130).attr("y", 30).text("Women").style("font-size", "16px").attr("alignment-baseline","middle")
svgLegend.append("text").attr("x", 230).attr("y", 30).text("Water").style("font-size", "16px").attr("alignment-baseline","middle")


var svg = d3.select("#test")
  .append("svg")
    .call(d3.zoom().on("zoom", function () {
       svg.attr("transform", d3.event.transform)
    }))
    .append("g")
    var width = 450
          height = 450
          margin = 40
      
      // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.
      var radius = Math.min(width, height) / 2 - margin
      
      // append the svg object to the div called 'barchartdiv'
      var newsvg = d3.select("#piechart")
        .append("svg")
          .attr("width", width)
          .attr("height", height)
        .append("g")
          .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")")
          
          
      
      // Create dummy data
      var data = {male:284,female:287}
      
      // set the color scale
      var color = d3.scaleOrdinal()
        .domain(data)
        .range(["red", "green", "#7b6888", "#6b486b", "#a05d56"])
      
      // Compute the position of each group on the pie:
      var pie = d3.pie()
        .value(function(d) {return d.value; })
      var data_ready = pie(d3.entries(data))
      
      // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.
      newsvg
        .selectAll('whatever')
        .data(data_ready)
        .enter()
        .append('path')
        .attr('d', d3.arc()
          .innerRadius(0)
          .outerRadius(radius)
        )
        .attr('fill', function(d){ return(color(d.data.key)) })
        .attr("stroke", "black")
        .style("stroke-width", "1px")
        .style("opacity", 0.7)

        var WomenClicked = true
        var MenClick = false

  function WomenGraph() {
      if(WomenClicked ) {
        WomenClicked = false
        var myClasses = document.querySelectorAll('.mendata'),
        i = 0,
        l = myClasses.length;

        for (i; i < l; i++) {
            myClasses[i].style.display = 'none';
        }
          }
      else {
        WomenClicked = true

        var myClasses = document.querySelectorAll('.mendata'),
        i = 0,
        l = myClasses.length;

        for (i; i < l; i++) {
            myClasses[i].style.display = 'block';
        }
          }
      }
      function MenGraph() {
      if(MenClick ) {
        MenClick = false
        var myClasses = document.querySelectorAll('.womendata'),
        i = 0,
        l = myClasses.length;

        for (i; i < l; i++) {
            myClasses[i].style.display = 'none';
        }
          }
      else {
        MenClick = true

        var myClasses = document.querySelectorAll('.womendata'),
        i = 0,
        l = myClasses.length;

        for (i; i < l; i++) {
            myClasses[i].style.display = 'block';
        }
          }
      }
    
    

      // set the dimensions and margins of the graph
      var margin = {top: 30, right: 30, bottom: 70, left: 60},
          width = 1000 - margin.left - margin.right,
          height = 500 - margin.top - margin.bottom;
      
      // append the barsvg object to the body of the page
      var barsvg = d3.select("#barchartdiv")
        .append("svg")
          .attr("width", width + margin.left + margin.right)
          .attr("height", height + margin.top + margin.bottom)
        .append("g")
          .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");
      
      // Parse the Data
      d3.csv("deathdays.csv", function(data) {
      
      // X axis
      var x = d3.scaleBand()
        .range([ 0, width ])
        .domain(data.map(function(d) { return d.date; }))
        .padding(0.2);
      barsvg.append("g")
        .attr("transform", "translate(0," + height + ")")
        .call(d3.axisBottom(x))
        .selectAll("text")
          .attr("transform", "translate(-10,0)rotate(-45)")
          .style("text-anchor", "end");
      
      // Add Y axis
      var y = d3.scaleLinear()
        .domain([0, 150])
        .range([ height, 0]);
      barsvg.append("g")
        .call(d3.axisLeft(y));
      
      // Bars
      barsvg.selectAll("mybar")
        .data(data)
        .enter()
        .append("rect")
          .attr("x", function(d) { return x(d.date); })
          .attr("y", function(d) { return y(d.deaths); })
          .attr("width", x.bandwidth())
          .attr("height", function(d) { return height - y(d.deaths); })
          .attr("fill", "grey")
      
      })
      
  </script>
</body>
</html>